<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>My Profile</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<style>
/* ---------- BACKGROUND (same as employee page) ---------- */
body {
  margin: 0;
  padding: 20px;
  font-family: "Poppins", Arial, sans-serif;
  min-height: 100vh;
  background: radial-gradient(circle at top left, #93c5fd 0%, #dbeafe 45%, #f8fafc 80%);
  color: #0f172a;
}

/* Glow balls */
body::before,
body::after {
  content: "";
  position: fixed;
  width: 260px;
  height: 260px;
  border-radius: 999px;
  filter: blur(60px);
  opacity: 0.45;
  z-index: -1;
}
body::before {
  top: -60px;
  left: -40px;
  background: #60a5fa;
}
body::after {
  bottom: -50px;
  right: -40px;
  background: #f472b6;
}

/* ---------- MAIN GLASS CARD ---------- */
.container {
  max-width: 520px;
  margin: 50px auto;
  padding: 25px;
  border-radius: 20px;
  background: rgba(255,255,255,0.7);
  border: 1px solid rgba(148,163,184,0.35);
  backdrop-filter: blur(14px);
  box-shadow: 0 12px 26px rgba(15,23,42,0.18);
  text-align: center;
}

/* ---------- TITLE ---------- */
h2 {
  margin: 0 0 18px 0;
  font-size: 24px;
  font-weight: 700;
  color: #0f172a;
}

/* ---------- PROFILE IMAGE ---------- */
.profile-img {
  width: 150px;
  height: 150px;
  border-radius: 999px;
  object-fit: cover;
  border: 5px solid rgba(255,255,255,0.9);
  box-shadow: 0 6px 20px rgba(0,0,0,0.25);
  margin-bottom: 15px;
}

/* ---------- FIELDS (label + value) ---------- */
.field {
  text-align: left;
  margin-top: 18px;
}

.field label {
  font-weight: 700;
  font-size: 14px;
  display: block;
  margin-bottom: 6px;
  color: #475569;
}

.field span {
  display: block;
  padding: 12px;
  border-radius: 12px;
  background: rgba(255,255,255,0.85);
  border: 1px solid rgba(148,163,184,0.35);
  font-size: 14px;
  backdrop-filter: blur(6px);
}

/* ---------- BUTTONS (same as employee) ---------- */
.btn {
  margin-top: 22px;
  width: 100%;
  padding: 12px;
  background: linear-gradient(135deg,#2563eb,#38bdf8);
  color: white;
  border: none;
  border-radius: 14px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  box-shadow: 0 5px 14px rgba(37,99,235,0.35);
}
.btn:hover {
  background: linear-gradient(135deg,#1e40af,#0ea5e9);
}

.back-btn {
  margin-top: 15px;
  display: block;
  width: 100%;
  padding: 12px;
  text-align: center;
  background: rgba(100,116,139,0.75);
  color: white;
  border-radius: 14px;
  text-decoration: none;
  font-size: 15px;
}
.back-btn:hover {
  background: rgba(71,85,105,0.95);
}
</style>
</head>


<body>

<div class="container">

  <h2>My Profile</h2>

  <img id="profilePhoto" class="profile-img"
       src="https://cdn-icons-png.flaticon.com/512/149/149071.png">

  <div class="field">
    <label>Name</label>
    <span id="name">Loading...</span>
  </div>

  <div class="field">
    <label>Mobile</label>
    <span id="mobile">Loading...</span>
  </div>

  <div class="field">
    <label>Email</label>
    <span id="email">Loading...</span>
  </div>

  <div class="field">
    <label>Address</label>
    <span id="address">Loading...</span>
  </div>

  <button class="btn" onclick="editProfile()">Edit Profile</button>

  <a class="back-btn" href="index.html">‚Üê Back to Dashboard</a>

</div>




<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
import {
  getFirestore, doc, getDoc
} from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";

import {
  getAuth, onAuthStateChanged
} from "https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js";


// FIREBASE CONFIG
const firebaseConfig = {
  apiKey: "AIzaSyApcn2ckkvfLaEuKEKOZfC6hcEfx44ZDJ0",
  authDomain: "tak-agro.firebaseapp.com",
  projectId: "tak-agro",
  storageBucket: "tak-agro.firebasestorage.app",
  messagingSenderId: "158309293772",
  appId: "1:158309293772:web:ebca377434d940d0b5ac69"
};

const app  = initializeApp(firebaseConfig);
const db   = getFirestore(app);
const auth = getAuth(app);

const OWNER_EMAIL = "bhuraramtak81@gmail.com";


// LOAD PROFILE DATA
onAuthStateChanged(auth, async (user) => {
  if (!user) return (window.location.href = "login.html");

  if (user.email !== OWNER_EMAIL) {
    return (window.location.href = "login.html");
  }

  document.getElementById("email").innerText = user.email;

  const snap = await getDoc(doc(db, "profiles", "owner"));
  if (snap.exists()) {
    const data = snap.data();

    if (data.photoURL) {
      document.getElementById("profilePhoto").src = data.photoURL;
    }

    document.getElementById("name").innerText = data.name || "";
    document.getElementById("mobile").innerText = data.mobile || "";
    document.getElementById("address").innerText = data.address || "";
  }
});


// EDIT PROFILE BUTTON
window.editProfile = function () {
  window.location.href = "profile-update.html";
};

</script>

</body>
</html>
